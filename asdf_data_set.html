


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ASDF Data Set &mdash; pyasdf 0.2.x documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="stylesheet" href="_static/my-styles.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="pyasdf 0.2.x documentation" href="index.html"/>
        <link rel="up" title="API" href="api.html"/>
        <link rel="next" title="Exceptions" href="exceptions.html"/>
        <link rel="prev" title="API" href="api.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pyasdf
          

          
            
            <img src="_static/pyasdf_logo.svg" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.2.x
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">API</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">ASDF Data Set</a></li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="inventory_utils.html">Inventory Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="query.html">Query</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="watermark.html">Watermark</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="detailed_explanations.html">Detailed Explanations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">pyasdf</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="api.html">API</a> &raquo;</li>
      
    <li>ASDF Data Set</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/asdf_data_set.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-pyasdf.asdf_data_set">
<span id="asdf-data-set"></span><h1>ASDF Data Set<a class="headerlink" href="#module-pyasdf.asdf_data_set" title="Permalink to this headline">¶</a></h1>
<p>Python implementation of the Adaptable Seismic Data Format (ASDF).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Lion Krischer (<a class="reference external" href="mailto:krischer&#37;&#52;&#48;geophysik&#46;uni-muenchen&#46;de">krischer<span>&#64;</span>geophysik<span>&#46;</span>uni-muenchen<span>&#46;</span>de</a>), 2013-2015</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">BSD 3-Clause (“BSD New” or “BSD Simplified”)</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="pyasdf.asdf_data_set.ASDFDataSet">
<em class="property">class </em><code class="descclassname">pyasdf.asdf_data_set.</code><code class="descname">ASDFDataSet</code><span class="sig-paren">(</span><em>filename</em>, <em>compression=’gzip-3’</em>, <em>shuffle=True</em>, <em>debug=False</em>, <em>mpi=None</em>, <em>mode=’a’</em>, <em>single_item_read_limit_in_mb=1024.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Object dealing with Adaptable Seismic Data Format (ASDF).</p>
<p>Central object of this Python package.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The filename of the HDF5 file (to be).</li>
<li><strong>compression</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – <p>The compression to use. Defaults to
<code class="docutils literal"><span class="pre">&quot;gzip-3&quot;</span></code> which yielded good results in the past. Will
only be applied to newly created data sets. Existing ones are not
touched. Using parallel I/O will also disable compression as it
is not possible to use both at the same time.</p>
<p><strong>Available compressions choices (all of them are lossless):</strong></p>
<ul>
<li><code class="docutils literal"><span class="pre">None</span></code>: No compression</li>
<li><code class="docutils literal"><span class="pre">&quot;gzip-0&quot;</span></code> - <code class="docutils literal"><span class="pre">&quot;gzip-9&quot;</span></code>: Gzip compression level 0  (worst
but fast) to 9 (best but slow)</li>
<li><code class="docutils literal"><span class="pre">&quot;lzf&quot;</span></code>: LZF compression</li>
<li><code class="docutils literal"><span class="pre">&quot;szip-ec-8&quot;</span></code>: szip compression</li>
<li><code class="docutils literal"><span class="pre">&quot;szip-ec-10&quot;</span></code>: szip compression</li>
<li><code class="docutils literal"><span class="pre">&quot;szip-nn-8&quot;</span></code>: szip compression</li>
<li><code class="docutils literal"><span class="pre">&quot;szip-nn-10&quot;</span></code>: szip compression</li>
</ul>
</li>
<li><strong>shuffle</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Turn the shuffle filter on or off. Turning it on
oftentimes increases the compression ratio at the expense of
some speed.</li>
<li><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – If True, print debug messages. Potentially very verbose.</li>
<li><strong>mpi</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Force MPI on/off. Don’t touch this unless you have a
reason.</li>
<li><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The mode the file is opened in. Passed to the
underlying <code class="xref py py-class docutils literal"><span class="pre">h5py.File</span></code> constructor. pyasdf expects to be
able to write to files for many operations so it might result in
strange errors if a read-only mode is used. Nonetheless this is
quite useful for some use cases as long as one is aware of the
potential repercussions.</li>
<li><strong>single_item_read_limit_in_mb</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – This limits the amount of waveform
data that can be read with a simple attribute or dictionary
access. Some ASDF files can get very big and this raises an
error if one tries to access more then the specified value. This
is mainly to guard against accidentally filling ones memory on
the interactive command line when just exploring an ASDF data
set. There are other ways to still access data and even this
setting can be overwritten.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.add_auxiliary_data">
<code class="descname">add_auxiliary_data</code><span class="sig-paren">(</span><em>data</em>, <em>data_type</em>, <em>path</em>, <em>parameters</em>, <em>provenance_id=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.add_auxiliary_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.add_auxiliary_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds auxiliary data to the file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> – The actual data as a n-dimensional numpy array.</li>
<li><strong>data_type</strong> – The type of data, think of it like a subfolder.</li>
<li><strong>path</strong> – The path of the data. Must be unique per data_type. Can
be a path separated by forward slashes at which point it will be
stored in a nested structure.</li>
<li><strong>parameters</strong> – Any additional options, as a Python dictionary.</li>
<li><strong>provenance_id</strong> – The id of the provenance of this data. The
provenance information itself must be added separately. Must be
given as a qualified name, e.g. <code class="docutils literal"><span class="pre">'{namespace_uri}id'</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The data type is the category of the data and the path the name of
that particular piece of data within that category.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_auxiliary_data</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="gp">... </span>                      <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;RandomArrays&quot;</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="n">path</span><span class="o">=</span><span class="s2">&quot;test_data&quot;</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">auxiliary_data</span><span class="o">.</span><span class="n">RandomArrays</span><span class="o">.</span><span class="n">test_data</span>
<span class="go">Auxiliary Data of Type &#39;RandomArrays&#39;</span>
<span class="go">Path: &#39;test_data&#39;</span>
<span class="go">Data shape: &#39;(10, )&#39;, dtype: &#39;float64&#39;</span>
<span class="go">Parameters:</span>
<span class="go">    a: 1</span>
<span class="go">    b: 2</span>
</pre></div>
</div>
<p>The path can contain forward slashes to create a nested hierarchy of
auxiliary data.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_auxiliary_data</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="gp">... </span>                      <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;RandomArrays&quot;</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="n">path</span><span class="o">=</span><span class="s2">&quot;some/nested/path/test_data&quot;</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">auxiliary_data</span><span class="o">.</span><span class="n">RandomArrays</span><span class="o">.</span><span class="n">some</span><span class="o">.</span><span class="n">nested</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">test_data</span>
<span class="go">Auxiliary Data of Type &#39;RandomArrays&#39;</span>
<span class="go">Path: &#39;some/nested/path/test_data&#39;</span>
<span class="go">Data shape: &#39;(10, )&#39;, dtype: &#39;float64&#39;</span>
<span class="go">Parameters:</span>
<span class="go">    a: 1</span>
<span class="go">    b: 2</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.add_auxiliary_data_file">
<code class="descname">add_auxiliary_data_file</code><span class="sig-paren">(</span><em>filename_or_object</em>, <em>path</em>, <em>parameters=None</em>, <em>provenance_id=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.add_auxiliary_data_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.add_auxiliary_data_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Special function adding a file or file like object as an auxiliary
data object denoting a file. This is very useful to store arbitrary
files in ASDF.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename_or_object</strong> – Filename, open-file or file-like object.
File should really be opened in binary mode, but this i not
checked.</li>
<li><strong>path</strong> – The path of the file. Has the same limitations as normal
tags.</li>
<li><strong>parameters</strong> – Any additional options, as a Python dictionary.</li>
<li><strong>provenance_id</strong> – The id of the provenance of this data. The
provenance information itself must be added separately. Must be
given as a qualified name, e.g. <code class="docutils literal"><span class="pre">'{namespace_uri}id'</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.add_provenance_document">
<code class="descname">add_provenance_document</code><span class="sig-paren">(</span><em>document</em>, <em>name=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.add_provenance_document"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.add_provenance_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a provenance document to the current ASDF file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>document</strong> (<em>Filename</em><em>, </em><em>file-like objects</em><em> or </em><em>prov document.</em>) – The document to add.</li>
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The name of the document within ASDF. Must be lowercase
alphanumeric with optional underscores. If not given, it will
autogenerate one. If given and it already exists, it will be
overwritten.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.add_quakeml">
<code class="descname">add_quakeml</code><span class="sig-paren">(</span><em>event</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.add_quakeml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.add_quakeml" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a QuakeML file or an existing ObsPy event to the data set.</p>
<p>An exception will be raised if an event is attempted to be added
that already exists within the data set. Duplicates are detected
based on the public ids of the events.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>event</strong> (<code class="xref py py-class docutils literal"><span class="pre">Event</span></code> or
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.event.Catalog.html#obspy.core.event.Catalog" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">Catalog</span></code></a>) – Filename or existing ObsPy event object.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">ValueError</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>For now we will create a new ASDF file but one can also use an
existing one.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">impory</span> <span class="n">pyasdf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">obspy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span> <span class="o">=</span> <span class="n">pyasdf</span><span class="o">.</span><span class="n">ASDFDataSet</span><span class="p">(</span><span class="s2">&quot;new_file.h5&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>One can add an event either by passing a filename …</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_quakeml</span><span class="p">(</span><span class="s2">&quot;/path/to/quake.xml&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>… or by passing an existing event or catalog object.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span> <span class="o">=</span> <span class="n">obspy</span><span class="o">.</span><span class="n">read_events</span><span class="p">(</span><span class="s2">&quot;/path/to/quakem.xml&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_quakeml</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.add_stationxml">
<code class="descname">add_stationxml</code><span class="sig-paren">(</span><em>stationxml</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.add_stationxml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.add_stationxml" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the StationXML to the data set object.</p>
<p>This does some fairly exhaustive processing and will happily
split the StationXML file and merge it with existing ones.</p>
<p>If you care to have an a more or less unchanged StationXML file in
the data set object be sure to add it one station at a time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stationxml</strong> (str or
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.inventory.inventory.Inventory.html#obspy.core.inventory.inventory.Inventory" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">Inventory</span></code></a>) – Filename of StationXML file or an ObsPy inventory
object containing the same.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.add_waveforms">
<code class="descname">add_waveforms</code><span class="sig-paren">(</span><em>waveform</em>, <em>tag</em>, <em>event_id=None</em>, <em>origin_id=None</em>, <em>magnitude_id=None</em>, <em>focal_mechanism_id=None</em>, <em>provenance_id=None</em>, <em>labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.add_waveforms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.add_waveforms" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds one or more waveforms to the current ASDF file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>waveform</strong> (<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.stream.Stream</span></code></a>,
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.trace.Trace.html#obspy.core.trace.Trace" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.trace.Trace</span></code></a>, str, …) – The waveform to add. Can either be an ObsPy Stream or
Trace object or something ObsPy can read.</li>
<li><strong>tag</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The path that will be given to all waveform files. It is
mandatory for all traces and facilitates identification of the data
within one ASDF volume. The <code class="docutils literal"><span class="pre">&quot;raw_record&quot;</span></code> path is,
by convention, reserved to raw, recorded, unprocessed data.</li>
<li><strong>event_id</strong> (<code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.Event</span></code>,
<code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.ResourceIdentifier</span></code>, str, or list) – The event or id which the waveform is associated
with. This is useful for recorded data if a clear association is
given, but also for synthetic data. Can also be a list of items.</li>
<li><strong>origin_id</strong> (<code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.Origin</span></code>,
<code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.ResourceIdentifier</span></code>, str, or list) – The particular origin this waveform is associated
with. This is mainly useful for synthetic data where the origin
is precisely known. Can also be a list of items.</li>
<li><strong>magnitude_id</strong> (<code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.Magnitude</span></code>,
<code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.ResourceIdentifier</span></code>, str, or list) – The particular magnitude this waveform is
associated with. This is mainly useful for synthetic data where
the magnitude is precisely known. Can also be a list of items.</li>
<li><strong>focal_mechanism_id</strong> (<code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.FocalMechanism</span></code>,
<code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.ResourceIdentifier</span></code>, str, or list) – The particular focal mechanism this
waveform is associated with. This is mainly useful for synthetic
data where the mechanism is precisely known. Can also be a list of
items.</li>
<li><strong>provenance_id</strong> – The id of the provenance of this data. The
provenance information itself must be added separately. Must be
given as a qualified name, e.g. <code class="docutils literal"><span class="pre">'{namespace_uri}id'</span></code>.</li>
<li><strong>labels</strong> (<em>list of str</em>) – A list of labels to associate with all the added
traces. Must not contain a comma as that is used as a separator.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>We first setup an example ASDF file with a single event.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyasdf</span> <span class="k">import</span> <span class="n">ASDFDataSet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span> <span class="o">=</span> <span class="n">ASDFDataSet</span><span class="p">(</span><span class="s2">&quot;event_tests.h5&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_quakeml</span><span class="p">(</span><span class="s2">&quot;quake.xml&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">events</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>Now assume we have a MiniSEED file that is an unprocessed
observation of that earthquake straight from a datacenter called
<code class="docutils literal"><span class="pre">recording.mseed</span></code>. We will now add it to the file, give it the
<code class="docutils literal"><span class="pre">&quot;raw_recording&quot;</span></code> path (which is reserved for raw, recorded,
and unproceseed data) and associate it with the event. Keep in mind
that this association is optional. It can also be associated with
multiple events - in that case just pass a list of objects.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_waveforms</span><span class="p">(</span><span class="s2">&quot;recording.mseed&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;raw_recording&quot;</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">event_id</span><span class="o">=</span><span class="n">event</span><span class="p">)</span>
</pre></div>
</div>
<p>It is also possible to directly add
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.stream.Stream</span></code></a> objects containing an arbitrary
number of <a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.trace.Trace.html#obspy.core.trace.Trace" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.trace.Trace</span></code></a> objects.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">obspy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">obspy</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c1"># Reads an example file without argument.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="go">3 Trace(s) in Stream:</span>
<span class="go">BW.RJOB..EHZ | 2009-08-24T00:20:03.00Z - ... | 100.0 Hz, 3000 samples</span>
<span class="go">BW.RJOB..EHN | 2009-08-24T00:20:03.00Z - ... | 100.0 Hz, 3000 samples</span>
<span class="go">BW.RJOB..EHE | 2009-08-24T00:20:03.00Z - ... | 100.0 Hz, 3000 samples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_waveforms</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;obspy_example&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Just to demonstrate that all waveforms can also be retrieved again.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">waveforms</span><span class="o">.</span><span class="n">BW_RJOB</span><span class="o">.</span><span class="n">obspy_example</span><span class="p">))</span>
<span class="go">3 Trace(s) in Stream:</span>
<span class="go">BW.RJOB..EHZ | 2009-08-24T00:20:03.00Z - ... | 100.0 Hz, 3000 samples</span>
<span class="go">BW.RJOB..EHN | 2009-08-24T00:20:03.00Z - ... | 100.0 Hz, 3000 samples</span>
<span class="go">BW.RJOB..EHE | 2009-08-24T00:20:03.00Z - ... | 100.0 Hz, 3000 samples</span>
</pre></div>
</div>
<p>For the last example lets assume we have the result of a simulation
stored in the <code class="docutils literal"><span class="pre">synthetics.sac</span></code> file. In this case we know the
precise source parameters (we specified them before running the
simulation) so it is a good idea to add that association to the
waveform. Please again keep in mind that they are all optional and
depending on your use case they might or might not be
useful/meaningful. You can again pass lists of all of these objects
in which case multiple associations will be stored in the file.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">origin</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">preferred_origin</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">magnitude</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">preferred_magnitude</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">focal_mechanism</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">preferred_focal_mechansism</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_waveforms</span><span class="p">(</span><span class="s2">&quot;synthetics.sac&quot;</span><span class="p">,</span> <span class="n">event_id</span><span class="o">=</span><span class="n">event</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">origin_id</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">magnitude_id</span><span class="o">=</span><span class="n">magnitude</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">focal_mechanism_id</span><span class="o">=</span><span class="n">focal_mechanism</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.append_waveforms">
<code class="descname">append_waveforms</code><span class="sig-paren">(</span><em>waveform</em>, <em>tag</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.append_waveforms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.append_waveforms" title="Permalink to this definition">¶</a></dt>
<dd><p>Append waveforms to an existing data array if possible.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="#pyasdf.asdf_data_set.ASDFDataSet.add_waveforms" title="pyasdf.asdf_data_set.ASDFDataSet.add_waveforms"><code class="xref py py-meth docutils literal"><span class="pre">add_waveforms()</span></code></a> method is the better choice in most
cases. This function here is only useful for special cases!</p>
</div>
<p>The main purpose of this function is to enable the construction of
ASDF files with large single arrays. The classical example is all
recordings of a station for a year or longer. If the
<a class="reference internal" href="#pyasdf.asdf_data_set.ASDFDataSet.add_waveforms" title="pyasdf.asdf_data_set.ASDFDataSet.add_waveforms"><code class="xref py py-meth docutils literal"><span class="pre">add_waveforms()</span></code></a> method is used ASDF will internally store
each file in one or more data sets. This function here will attempt
to enlarge existing data arrays and append to them creating larger
ones that are a bit more efficient to read. It is slower to write
this way but it can potentially be faster to read.</p>
<p>This is only possible if the to be appended waveform traces
seamlessly fit after an existing trace with a tolerance of half a
sampling interval.</p>
<p>Please note that a single array in ASDF cannot have any gaps and/or
overlaps so even if this function is used it might still result in
several data sets in the HDF5 file.</p>
<p>This additionally requires that the data-sets being appended to have
chunks as non-chunked data cannot be resized. MPI is consequently
not allowed for this function as well.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Any potentially set <cite>event_id</cite>, <cite>origin_id</cite>, <cite>magnitude_id</cite>,
<cite>focal_mechanism_id</cite>, <cite>provenance_id</cite>, or <cite>labels</cite> will carry over
from the trace that is being appended to so please only use this
method if you known what you are doing.</p>
</div>
<p class="rubric">Example</p>
<p>Assuming three trace in three different files, <code class="docutils literal"><span class="pre">A</span></code>, <code class="docutils literal"><span class="pre">B</span></code>,
and <code class="docutils literal"><span class="pre">C</span></code>, that could seamlessly be merged to one big trace
without producing a gap or overlap. Using <a class="reference internal" href="#pyasdf.asdf_data_set.ASDFDataSet.add_waveforms" title="pyasdf.asdf_data_set.ASDFDataSet.add_waveforms"><code class="xref py py-meth docutils literal"><span class="pre">add_waveforms()</span></code></a>
will create three seperate data arrays in the ASDF file, e.g.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">add_waveforms</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">add_waveforms</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">add_waveforms</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>results in:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">Waveforms</span>
    <span class="o">/</span><span class="n">XX</span><span class="o">.</span><span class="n">YYYY</span>
        <span class="n">A</span>
        <span class="n">B</span>
        <span class="n">C</span>
</pre></div>
</div>
<p>Using this method here on the other hand will (if possible) create a
single large array which might be a bit faster to read or to iterate
over.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">append_waveforms</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">append_waveforms</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">append_waveforms</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This results in:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">Waveforms</span>
    <span class="o">/</span><span class="n">XX</span><span class="o">.</span><span class="n">YYYY</span>
        <span class="n">A</span> <span class="o">+</span> <span class="n">B</span> <span class="o">+</span> <span class="n">C</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>waveform</strong> (<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.stream.Stream</span></code></a>,
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.trace.Trace.html#obspy.core.trace.Trace" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.trace.Trace</span></code></a>, str, …) – The waveform to add. Can either be an ObsPy Stream
or Trace object or something ObsPy can read.</li>
<li><strong>tag</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The path that will be given to all waveform files. It is
mandatory for all traces and facilitates identification of the data
within one ASDF volume. The <code class="docutils literal"><span class="pre">&quot;raw_record&quot;</span></code> path is,
by convention, reserved to raw, recorded, unprocessed data.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.asdf_format_version">
<code class="descname">asdf_format_version</code><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.asdf_format_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the version of the ASDF file.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.events">
<code class="descname">events</code><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.events" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all events stored in the data set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">An ObsPy <a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.event.Catalog.html#obspy.core.event.Catalog" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">Catalog</span></code></a> object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.filename">
<code class="descname">filename</code><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the path of the underlying file on the filesystem. Works in most
circumstances.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.filesize">
<code class="descname">filesize</code><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.filesize" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current size of the file.</p>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.flush">
<code class="descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.flush"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush the underlying HDF5 file.</p>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.get_all_coordinates">
<code class="descname">get_all_coordinates</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.get_all_coordinates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.get_all_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a dictionary of the coordinates of all stations.</p>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.get_data_for_tag">
<code class="descname">get_data_for_tag</code><span class="sig-paren">(</span><em>station_name</em>, <em>tag</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.get_data_for_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.get_data_for_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the waveform and station data for the requested station and
path.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>station_name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – A string with network id and station id,
e.g. <code class="docutils literal"><span class="pre">&quot;IU.ANMO&quot;</span></code></li>
<li><strong>tag</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The path of the waveform.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">tuple of the waveform and the inventory.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">Stream</span></code></a>,
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.inventory.inventory.Inventory.html#obspy.core.inventory.inventory.Inventory" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">Inventory</span></code></a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.get_provenance_document">
<code class="descname">get_provenance_document</code><span class="sig-paren">(</span><em>document_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.get_provenance_document"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.get_provenance_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a provenance document with a certain name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>document_name</strong> – The name of the provenance document to retrieve.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.get_waveforms">
<code class="descname">get_waveforms</code><span class="sig-paren">(</span><em>network</em>, <em>station</em>, <em>location</em>, <em>channel</em>, <em>starttime</em>, <em>endtime</em>, <em>tag</em>, <em>automerge=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.get_waveforms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.get_waveforms" title="Permalink to this definition">¶</a></dt>
<dd><p>Directly access waveforms.</p>
<p>This enables a more exact specification of what one wants to
retrieve from an ASDF file. Most importantly it honors the start and
end time and only reads those samples that are actually desired -
this is especially important for large, continuous data sets.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>network</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The network code. Can contain wildcards.</li>
<li><strong>station</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The station code. Can contain wildcards.</li>
<li><strong>location</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The location code. Can contain wildcards.</li>
<li><strong>channel</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The channel code. Can contain wildcards.</li>
<li><strong>starttime</strong> (<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.utcdatetime.UTCDateTime.html#obspy.core.utcdatetime.UTCDateTime" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.utcdatetime.UTCDateTime</span></code></a>.) – The time of the first sample.</li>
<li><strong>endtime</strong> (<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.utcdatetime.UTCDateTime.html#obspy.core.utcdatetime.UTCDateTime" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.utcdatetime.UTCDateTime</span></code></a>.) – The time of the last sample.</li>
<li><strong>tag</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The tag to extract.</li>
<li><strong>automerge</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Automatically merge adjacent traces if they are
exactly adjacent (e.g. last sample from previous trace + first
sample of next trace are one delta apart).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.ifilter">
<code class="descname">ifilter</code><span class="sig-paren">(</span><em>*query_objects</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.ifilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.ifilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator containing only the filtered information. Usage
is fairly complex, a separate documentation page for
<a class="reference internal" href="querying_data.html"><span class="doc">Querying a Data Set</span></a> is available - here is just a quick example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">ifilter</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">q</span><span class="o">.</span><span class="n">network</span> <span class="o">==</span> <span class="s2">&quot;B?&quot;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">ds</span><span class="o">.</span><span class="n">q</span><span class="o">.</span><span class="n">channel</span> <span class="o">==</span> <span class="s2">&quot;*Z&quot;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">ds</span><span class="o">.</span><span class="n">q</span><span class="o">.</span><span class="n">starttime</span> <span class="o">&gt;=</span> <span class="s2">&quot;2015-01-01&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.mpi">
<code class="descname">mpi</code><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.mpi" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a named tuple with <code class="docutils literal"><span class="pre">comm</span></code>, <code class="docutils literal"><span class="pre">rank</span></code>, <code class="docutils literal"><span class="pre">size</span></code>, and <code class="docutils literal"><span class="pre">MPI</span></code>
if run with MPI and <code class="docutils literal"><span class="pre">False</span></code> otherwise.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.pretty_filesize">
<code class="descname">pretty_filesize</code><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.pretty_filesize" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a pretty string representation of the size of the file.</p>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>process_function</em>, <em>output_filename</em>, <em>tag_map</em>, <em>traceback_limit=3</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the contents of an <code class="docutils literal"><span class="pre">ASDF</span></code> file in parallel.</p>
<p>Applies a function to the contents of the current data set and
writes the output to a new <code class="docutils literal"><span class="pre">ASDF</span></code> file. Can be run with and
without MPI. Please see the <a class="reference internal" href="parallel_processing.html"><span class="doc">Parallel Processing</span></a> document for
more details.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>process_function</strong> (<em>function</em>) – A function with two argument:
An <a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.stream.Stream</span></code></a> object and an
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.inventory.inventory.Inventory.html#obspy.core.inventory.inventory.Inventory" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.inventory.inventory.Inventory</span></code></a> object. It should
return a <a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (1.0.3) v1.0)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.stream.Stream</span></code></a> object which will
then be written to the new file.</li>
<li><strong>output_filename</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The output filename. Must not yet exist.</li>
<li><strong>tag_map</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – A dictionary mapping the input tags to output tags.</li>
<li><strong>traceback_limit</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – The length of the traceback printed if an
error occurs in one of the workers.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.process_two_files_without_parallel_output">
<code class="descname">process_two_files_without_parallel_output</code><span class="sig-paren">(</span><em>other_ds</em>, <em>process_function</em>, <em>traceback_limit=3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.process_two_files_without_parallel_output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.process_two_files_without_parallel_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Process data in two data sets.</p>
<p>This is mostly useful for comparing data in two data sets in any
number of scenarios. It again takes a function and will apply it on
each station that is common in both data sets. Please see the
<a class="reference internal" href="parallel_processing.html"><span class="doc">Parallel Processing</span></a> document for more details.</p>
<p>Can only be run with MPI.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>other_ds</strong> (<a class="reference internal" href="#pyasdf.asdf_data_set.ASDFDataSet" title="pyasdf.asdf_data_set.ASDFDataSet"><code class="xref py py-class docutils literal"><span class="pre">ASDFDataSet</span></code></a>) – The data set to compare to.</li>
<li><strong>process_function</strong> – The processing function takes two
parameters: The station group from this data set and the matching
station group from the other data set.</li>
<li><strong>traceback_limit</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – The length of the traceback printed if an
error occurs in one of the workers.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A dictionary for each station with gathered values. Will
only be available on rank 0.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate and ASDF file. It currently checks that each waveform file
has a corresponding station file.</p>
<p>This does not (by far) replace the actual ASDF format validator.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="exceptions.html" class="btn btn-neutral float-right" title="Exceptions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api.html" class="btn btn-neutral" title="API" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2016, Lion Krischer.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.2.x',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>