


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ASDF Data Set &mdash; pyasdf 0.1.x documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="stylesheet" href="_static/my-styles.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  
    <link rel="top" title="pyasdf 0.1.x documentation" href="index.html"/>
        <link rel="up" title="API" href="api.html"/>
        <link rel="next" title="Exceptions" href="exceptions.html"/>
        <link rel="prev" title="API" href="api.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> pyasdf</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#pyasdf-and-dependencies">pyasdf and Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#testing">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#building-the-documentation">Building the Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#learning-python-and-obspy">Learning Python and ObsPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#using-pyasdf">Using pyasdf</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples/create_observed_asdf_file.html">Creating an ASDF File</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/process_observed.html">Processing Observed Data in Parallel</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/parallel_pyflex.html">Running pyflex in Parallel</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">API</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">ASDF Data Set</a></li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="inventory_utils.html">Inventory Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="query.html">Query</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="watermark.html">Watermark</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="detailed_explanations.html">Detailed Explanations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="of_tags_and_labels.html">Of Tags and Labels</a></li>
<li class="toctree-l2"><a class="reference internal" href="querying_data.html">Querying a Data Set</a></li>
<li class="toctree-l2"><a class="reference internal" href="station_data.html">Working With Station Data</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">pyasdf</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="api.html">API</a> &raquo;</li>
      
    <li>ASDF Data Set</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/asdf_data_set.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="module-pyasdf.asdf_data_set">
<span id="asdf-data-set"></span><h1>ASDF Data Set<a class="headerlink" href="#module-pyasdf.asdf_data_set" title="Permalink to this headline">¶</a></h1>
<p>Python implementation of the Adaptable Seismic Data Format (ASDF).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">Lion Krischer (<a class="reference external" href="mailto:krischer&#37;&#52;&#48;geophysik&#46;uni-muenchen&#46;de">krischer<span>&#64;</span>geophysik<span>&#46;</span>uni-muenchen<span>&#46;</span>de</a>), 2013-2015</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">BSD 3-Clause (&#8220;BSD New&#8221; or &#8220;BSD Simplified&#8221;)</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="pyasdf.asdf_data_set.ASDFDataSet">
<em class="property">class </em><code class="descclassname">pyasdf.asdf_data_set.</code><code class="descname">ASDFDataSet</code><span class="sig-paren">(</span><em>filename</em>, <em>compression='gzip-3'</em>, <em>debug=False</em>, <em>mpi=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Object dealing with Adaptable Seismic Data Format (ASDF).</p>
<p>Central object of this Python package.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The filename of the HDF5 file (to be).</li>
<li><strong>compression</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; <p>The compression to use. Defaults to
<code class="docutils literal"><span class="pre">&quot;gzip-3&quot;</span></code> which yielded good results in the past. Will
only be applied to newly created data sets. Existing ones are not
touched. Using parallel I/O will also disable compression as it
is not possible to use both at the same time.</p>
<p><strong>Available compressions choices (all of them are lossless):</strong></p>
<ul>
<li><code class="docutils literal"><span class="pre">None</span></code>: No compression</li>
<li><code class="docutils literal"><span class="pre">&quot;gzip-0&quot;</span></code> - <code class="docutils literal"><span class="pre">&quot;gzip-9&quot;</span></code>: Gzip compression level 0  (worst
but fast) to 9 (best but slow)</li>
<li><code class="docutils literal"><span class="pre">&quot;lzf&quot;</span></code>: LZF compression</li>
<li><code class="docutils literal"><span class="pre">&quot;szip-ec-8&quot;</span></code>: szip compression</li>
<li><code class="docutils literal"><span class="pre">&quot;szip-ec-10&quot;</span></code>: szip compression</li>
<li><code class="docutils literal"><span class="pre">&quot;szip-nn-8&quot;</span></code>: szip compression</li>
<li><code class="docutils literal"><span class="pre">&quot;szip-nn-10&quot;</span></code>: szip compression</li>
</ul>
</li>
<li><strong>debug</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If True, print debug messages. Potentially very verbose.</li>
<li><strong>mpi</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; Force MPI on/off. Don&#8217;t touch this unless you have a
reason.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.add_auxiliary_data">
<code class="descname">add_auxiliary_data</code><span class="sig-paren">(</span><em>data</em>, <em>data_type</em>, <em>path</em>, <em>parameters</em>, <em>provenance_id=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.add_auxiliary_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.add_auxiliary_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds auxiliary data to the file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> &#8211; The actual data as a n-dimensional numpy array.</li>
<li><strong>data_type</strong> &#8211; The type of data, think of it like a subfolder.</li>
<li><strong>path</strong> &#8211; The path of the data. Must be unique per data_type. Can
be a path separated by forward slashes at which point it will be
stored in a nested structure.</li>
<li><strong>parameters</strong> &#8211; Any additional options, as a Python dictionary.</li>
<li><strong>provenance_id</strong> &#8211; The id of the provenance of this data. The
provenance information itself must be added separately. Must be
given as a qualified name, e.g. <code class="docutils literal"><span class="pre">'{namespace_uri}id'</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The data type is the category of the data and the path the name of
that particular piece of data within that category.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_auxiliary_data</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="gp">... </span>                      <span class="n">data_type</span><span class="o">=</span><span class="s">&quot;RandomArray&quot;</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="n">path</span><span class="o">=</span><span class="s">&quot;test_data&quot;</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">auxiliary_data</span><span class="o">.</span><span class="n">RandomArray</span><span class="o">.</span><span class="n">test_data</span>
<span class="go">Auxiliary Data of Type &#39;RandomArray&#39;</span>
<span class="go">Path: &#39;test_data&#39;</span>
<span class="go">Data shape: &#39;(10, )&#39;, dtype: &#39;float64&#39;</span>
<span class="go">Parameters:</span>
<span class="go">    a: 1</span>
<span class="go">    b: 2</span>
</pre></div>
</div>
<p>The path can contain forward slashes to create a nested hierarchy of
auxiliary data.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_auxiliary_data</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="gp">... </span>                      <span class="n">data_type</span><span class="o">=</span><span class="s">&quot;RandomArray&quot;</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="n">path</span><span class="o">=</span><span class="s">&quot;some/nested/path/test_data&quot;</span><span class="p">,</span>
<span class="gp">... </span>                      <span class="n">parameters</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">auxiliary_data</span><span class="o">.</span><span class="n">RandomArray</span><span class="o">.</span><span class="n">some</span><span class="o">.</span><span class="n">nested</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">test_data</span>
<span class="go">Auxiliary Data of Type &#39;RandomArray&#39;</span>
<span class="go">Path: &#39;some/nested/path/test_data&#39;</span>
<span class="go">Data shape: &#39;(10, )&#39;, dtype: &#39;float64&#39;</span>
<span class="go">Parameters:</span>
<span class="go">    a: 1</span>
<span class="go">    b: 2</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.add_auxiliary_data_file">
<code class="descname">add_auxiliary_data_file</code><span class="sig-paren">(</span><em>filename_or_object</em>, <em>path</em>, <em>parameters=None</em>, <em>provenance_id=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.add_auxiliary_data_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.add_auxiliary_data_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Special function adding a file or file like object as an auxiliary
data object denoting a file. This is very useful to store arbirary
files in ASDF.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename_or_object</strong> &#8211; Filename, open-file or file-like object.
File should really be opened in binary mode, but this i not
checked.</li>
<li><strong>path</strong> &#8211; The path of the file. Has the same limitations as normal
tags.</li>
<li><strong>parameters</strong> &#8211; Any additional options, as a Python dictionary.</li>
<li><strong>provenance_id</strong> &#8211; The id of the provenance of this data. The
provenance information itself must be added separately. Must be
given as a qualified name, e.g. <code class="docutils literal"><span class="pre">'{namespace_uri}id'</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.add_provenance_document">
<code class="descname">add_provenance_document</code><span class="sig-paren">(</span><em>document</em>, <em>name=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.add_provenance_document"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.add_provenance_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a provenance document to the open ASDF file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>document</strong> (<em>Filename, file-like objects or prov document.</em>) &#8211; The document to add.</li>
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The name of the document within ASDF. Must be lowercase
alphanumeric with optional underscores. If not given, it will
autogenerate one. If given and it already exists, it will be
overwritten.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.add_quakeml">
<code class="descname">add_quakeml</code><span class="sig-paren">(</span><em>event</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.add_quakeml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.add_quakeml" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a QuakeML file or an existing ObsPy event to the data set.</p>
<p>An exception will be raised if an event is attempted to be added
that already exists within the data set. Duplicates are detected
based on the public ids of the events.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>event</strong> (<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.event.Event.html#obspy.core.event.Event" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">Event</span></code></a> or
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.event.Catalog.html#obspy.core.event.Catalog" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">Catalog</span></code></a>) &#8211; Filename or existing ObsPy event object.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">ValueError</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>For now we will create a new ASDF file but one can also use an
existing one.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">impory</span> <span class="n">pyasdf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">obspy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span> <span class="o">=</span> <span class="n">pyasdf</span><span class="o">.</span><span class="n">ASDFDataSet</span><span class="p">(</span><span class="s">&quot;new_file.h5&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>One can add an event either by passing a filename ...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_quakeml</span><span class="p">(</span><span class="s">&quot;/path/to/quake.xml&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>... or by passing an existing event or catalog object.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span> <span class="o">=</span> <span class="n">obspy</span><span class="o">.</span><span class="n">readEvents</span><span class="p">(</span><span class="s">&quot;/path/to/quakem.xml&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_quakeml</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.add_stationxml">
<code class="descname">add_stationxml</code><span class="sig-paren">(</span><em>stationxml</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.add_stationxml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.add_stationxml" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the StationXML to the data set object.</p>
<p>This does some fairly exhaustive processing and will happily
split the StationXML file and merge it with existing ones.</p>
<p>If you care to have an a more or less unchanged StationXML file in
the data set object be sure to add it one station at a time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stationxml</strong> (str or <a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.station.inventory.Inventory.html#obspy.station.inventory.Inventory" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">Inventory</span></code></a>) &#8211; Filename of StationXML file or an ObsPy inventory
object containing the same.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.add_waveforms">
<code class="descname">add_waveforms</code><span class="sig-paren">(</span><em>waveform</em>, <em>tag</em>, <em>event_id=None</em>, <em>origin_id=None</em>, <em>magnitude_id=None</em>, <em>focal_mechanism_id=None</em>, <em>provenance_id=None</em>, <em>labels=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.add_waveforms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.add_waveforms" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds one or more waveforms to the current ASDF file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>waveform</strong> (<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.stream.Stream</span></code></a>,
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.trace.Trace.html#obspy.core.trace.Trace" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.trace.Trace</span></code></a>, str, ...) &#8211; The waveform to add. Can either be an ObsPy Stream or
Trace object or something ObsPy can read.</li>
<li><strong>tag</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The path that will be given to all waveform files. It is
mandatory for all traces and facilitates identification of the data
within one ASDF volume. The <code class="docutils literal"><span class="pre">&quot;raw_record&quot;</span></code> path is,
by convention, reserved to raw, recorded, unprocessed data.</li>
<li><strong>event_id</strong> (<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.event.Event.html#obspy.core.event.Event" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.Event</span></code></a>,
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.event.ResourceIdentifier.html#obspy.core.event.ResourceIdentifier" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.ResourceIdentifier</span></code></a>, or str) &#8211; The event or id which the waveform is associated
with. This is useful for recorded data if a clear association is
given, but also for synthetic data.</li>
<li><strong>origin_id</strong> (<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.event.Origin.html#obspy.core.event.Origin" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.Origin</span></code></a>,
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.event.ResourceIdentifier.html#obspy.core.event.ResourceIdentifier" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.ResourceIdentifier</span></code></a>, or str) &#8211; The particular origin this waveform is associated
with. This is mainly useful for synthetic data where the origin
is precisely known.</li>
<li><strong>magnitude_id</strong> (<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.event.Magnitude.html#obspy.core.event.Magnitude" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.Magnitude</span></code></a>,
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.event.ResourceIdentifier.html#obspy.core.event.ResourceIdentifier" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.ResourceIdentifier</span></code></a>, or str) &#8211; The particular magnitude this waveform is
associated with. This is mainly useful for synthetic data where
the magnitude is precisely known.</li>
<li><strong>focal_mechanism_id</strong> (<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.event.FocalMechanism.html#obspy.core.event.FocalMechanism" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.FocalMechanism</span></code></a>,
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.event.ResourceIdentifier.html#obspy.core.event.ResourceIdentifier" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.event.ResourceIdentifier</span></code></a>, or str) &#8211; The particular focal mechanism this
waveform is associated with. This is mainly useful for synthetic
data where the mechanism is precisely known.</li>
<li><strong>provenance_id</strong> &#8211; The id of the provenance of this data. The
provenance information itself must be added separately. Must be
given as a qualified name, e.g. <code class="docutils literal"><span class="pre">'{namespace_uri}id'</span></code>.</li>
<li><strong>labels</strong> (<em>list of str</em>) &#8211; A list of labels to associate with all the added
traces. Must not contain a comma as that is used as a separator.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>We first setup an example ASDF file with a single event.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyasdf</span> <span class="kn">import</span> <span class="n">ASDFDataSet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span> <span class="o">=</span> <span class="n">ASDFDataSet</span><span class="p">(</span><span class="s">&quot;event_tests.h5&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_quakeml</span><span class="p">(</span><span class="s">&quot;quake.xml&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">events</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<p>Now assume we have a MiniSEED file that is an unprocessed
observation of that earthquake straight from a datacenter called
<code class="docutils literal"><span class="pre">recording.mseed</span></code>. We will now add it to the file, give it the
<code class="docutils literal"><span class="pre">&quot;raw_recording&quot;</span></code> path (which is reserved for raw, recorded,
and unproceseed data) and associate it with the event. Keep in mind
that this association is optional.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_waveforms</span><span class="p">(</span><span class="s">&quot;recording.mseed&quot;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s">&quot;raw_recording&quot;</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">event_id</span><span class="o">=</span><span class="n">event</span><span class="p">)</span>
</pre></div>
</div>
<p>It is also possible to directly add
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.stream.Stream</span></code></a> objects containing an arbitrary
number of <a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.trace.Trace.html#obspy.core.trace.Trace" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.trace.Trace</span></code></a> objects.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">obspy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">obspy</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c"># Reads an example file without argument.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="go">3 Trace(s) in Stream:</span>
<span class="go">BW.RJOB..EHZ | 2009-08-24T00:20:03.00Z - ... | 100.0 Hz, 3000 samples</span>
<span class="go">BW.RJOB..EHN | 2009-08-24T00:20:03.00Z - ... | 100.0 Hz, 3000 samples</span>
<span class="go">BW.RJOB..EHE | 2009-08-24T00:20:03.00Z - ... | 100.0 Hz, 3000 samples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_waveforms</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s">&quot;obspy_example&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Just to demonstrate that all waveforms can also be retrieved again.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="k">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">waveforms</span><span class="o">.</span><span class="n">BW_RJOB</span><span class="o">.</span><span class="n">obspy_example</span><span class="p">))</span>
<span class="go">3 Trace(s) in Stream:</span>
<span class="go">BW.RJOB..EHZ | 2009-08-24T00:20:03.00Z - ... | 100.0 Hz, 3000 samples</span>
<span class="go">BW.RJOB..EHN | 2009-08-24T00:20:03.00Z - ... | 100.0 Hz, 3000 samples</span>
<span class="go">BW.RJOB..EHE | 2009-08-24T00:20:03.00Z - ... | 100.0 Hz, 3000 samples</span>
</pre></div>
</div>
<p>For the last example lets assume we have the result of a simulation
stored in the <code class="docutils literal"><span class="pre">synthetics.sac</span></code> file. In this case we know the
precise source parameters (we specified them before running the
simulation) so it is a good idea to add that association to the
waveform. Please again keep in mind that they are all optional and
depending on your use case they might or might not be
useful/meaningful.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">origin</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">preferred_origin</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">magnitude</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">preferred_magnitude</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">focal_mechanism</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">preferred_focal_mechansism</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ds</span><span class="o">.</span><span class="n">add_waveforms</span><span class="p">(</span><span class="s">&quot;synthetics.sac&quot;</span><span class="p">,</span> <span class="n">event_id</span><span class="o">=</span><span class="n">event</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">origin_id</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">magnitude_id</span><span class="o">=</span><span class="n">magnitude</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">focal_mechanism_id</span><span class="o">=</span><span class="n">focal_mechanism</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.asdf_format_version">
<code class="descname">asdf_format_version</code><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.asdf_format_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the version of the ASDF file.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.events">
<code class="descname">events</code><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.events" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all events stored in the data set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">An ObsPy <a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.event.Catalog.html#obspy.core.event.Catalog" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">Catalog</span></code></a> object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.filename">
<code class="descname">filename</code><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the path of the underlying file on the filesystem. Works in most
circumstances.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.filesize">
<code class="descname">filesize</code><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.filesize" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current size of the file.</p>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.flush">
<code class="descname">flush</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.flush"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush the underlying HDF5 file.</p>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.get_all_coordinates">
<code class="descname">get_all_coordinates</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.get_all_coordinates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.get_all_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a dictionary of the coordinates of all stations.</p>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.get_data_for_tag">
<code class="descname">get_data_for_tag</code><span class="sig-paren">(</span><em>station_name</em>, <em>tag</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.get_data_for_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.get_data_for_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the waveform and station data for the requested station and
path.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>station_name</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; A string with network id and station id,
e.g. <code class="docutils literal"><span class="pre">&quot;IU.ANMO&quot;</span></code></li>
<li><strong>tag</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The path of the waveform.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">tuple of the waveform and the inventory.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">Stream</span></code></a>,
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.station.inventory.Inventory.html#obspy.station.inventory.Inventory" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">Inventory</span></code></a>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.ifilter">
<code class="descname">ifilter</code><span class="sig-paren">(</span><em>*query_objects</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.ifilter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.ifilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator containing only the filtered information. Usage
is fairly complex, a separate documentation page for
<a class="reference internal" href="querying_data.html"><em>Querying a Data Set</em></a> is available - here is just a quick example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">ifilter</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">q</span><span class="o">.</span><span class="n">network</span> <span class="o">==</span> <span class="s">&quot;B?&quot;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">ds</span><span class="o">.</span><span class="n">q</span><span class="o">.</span><span class="n">channel</span> <span class="o">==</span> <span class="s">&quot;*Z&quot;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">ds</span><span class="o">.</span><span class="n">q</span><span class="o">.</span><span class="n">starttime</span> <span class="o">&gt;=</span> <span class="s">&quot;2015-01-01&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.mpi">
<code class="descname">mpi</code><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.mpi" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a named tuple with <code class="docutils literal"><span class="pre">comm</span></code>, <code class="docutils literal"><span class="pre">rank</span></code>, <code class="docutils literal"><span class="pre">size</span></code>, and <code class="docutils literal"><span class="pre">MPI</span></code>
if run with MPI and <code class="docutils literal"><span class="pre">False</span></code> otherwise.</p>
</dd></dl>

<dl class="attribute">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.pretty_filesize">
<code class="descname">pretty_filesize</code><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.pretty_filesize" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a pretty string representation of the size of the file.</p>
</dd></dl>

<dl class="method">
<dt id="pyasdf.asdf_data_set.ASDFDataSet.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyasdf/asdf_data_set.html#ASDFDataSet.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyasdf.asdf_data_set.ASDFDataSet.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate and ASDF file. It currently checks that each waveform file
has a corresponding station file.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="exceptions.html" class="btn btn-neutral float-right" title="Exceptions">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api.html" class="btn btn-neutral" title="API"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2015, Lion Krischer.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.x',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>